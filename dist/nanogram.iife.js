var Nanogram=function(n){"use strict";function r(){return(r=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}).apply(this,arguments)}var e=/<script type="text\/javascript">window._sharedData = (.*);<\/script>/,t=["[nanogram.js] It looks like your network has been temporary banned because of too many requests."].join("\n"),o=function(n){return"https://www.instagram.com/"+n},l=function(n,r){return new Promise((function(t,o){var l,u,i,a;return void 0===r&&(r=!0),Promise.resolve(function(n,r){return new Promise((function(e,t){var o=new XMLHttpRequest;o.open(n,r),o.onload=function(){return e(o)},o.onerror=t,o.send()}))}("GET",n)).then((function(n){try{return u=(l=n).responseText,i=l.status,a=l.responseURL,i>=200&&i<400?t(function(n,r){try{var t=n;return r&&(t=e.exec(n)[1]),JSON.parse(t)}catch(n){throw new Error(n)}}(u,r)):o(new Error(i+" for "+a))}catch(n){return o(n)}}),o)}))};return n.getCitiesByCountryId=function(n){return new Promise((function(e,u){var i,a,c,s,d,v,y,f,h,p;return a={city_list:null,country_info:null},c=o("explore/locations/"+n+"/"),Promise.resolve(l(c)).then((function(n){try{return(d=null==(s=n)||null==(i=s.entry_data)?void 0:i.LocationsDirectoryPage)?(v=r({},null==d?void 0:d[0]),y=v.city_list,f=void 0===y?null:y,h=v.country_info,p=void 0===h?null:h,a.city_list=f,a.country_info=p,e(a)):u(new Error(t))}catch(n){return u(n)}}),u)}))},n.getCountries=function(){return new Promise((function(n,e){var u,i,a,c,s,d,v,y;return i={country_list:null},a=o("explore/locations/"),Promise.resolve(l(a)).then((function(o){try{return(s=null==(c=o)||null==(u=c.entry_data)?void 0:u.LocationsDirectoryPage)?(d=r({},null==s?void 0:s[0]),v=d.country_list,y=void 0===v?null:v,i.country_list=y,n(i)):e(new Error(t))}catch(n){return e(n)}}),e)}))},n.getMediaByLocation=function(n,e){return new Promise((function(u,i){var a,c,s,d,v,y,f,h,p;return c={location:null},s=o("explore/locations/"+n+"/"+e+"/"),Promise.resolve(l(s)).then((function(n){try{return(v=null==(d=n)||null==(a=d.entry_data)?void 0:a.LocationsPage)?(f=r({},null==v||null==(y=v[0])?void 0:y.graphql),h=f.location,p=void 0===h?null:h,c.location=p,u(c)):i(new Error(t))}catch(n){return i(n)}}),i)}))},n.getMediaByPlaceId=function(n){return new Promise((function(e,u){var i,a,c,s,d,v,y,f,h;return a={location:null},c=o("explore/locations/"+n+"/"),Promise.resolve(l(c)).then((function(n){try{return(d=null==(s=n)||null==(i=s.entry_data)?void 0:i.LocationsPage)?(y=r({},null==d||null==(v=d[0])?void 0:v.graphql),f=y.location,h=void 0===f?null:f,a.location=h,e(a)):u(new Error(t))}catch(n){return u(n)}}),u)}))},n.getMediaByPostId=function(n){return new Promise((function(e,u){var i,a,c,s,d,v,y,f,h;return a={post:null},c=o("p/"+n+"/"),Promise.resolve(l(c)).then((function(n){try{return(d=null==(s=n)||null==(i=s.entry_data)?void 0:i.PostPage)?(y=r({},null==d||null==(v=d[0])?void 0:v.graphql),f=y.shortcode_media,h=void 0===f?null:f,a.post=h,e(a)):u(new Error(t))}catch(n){return u(n)}}),u)}))},n.getMediaByReelId=function(n){return new Promise((function(e,u){var i,a,c,s,d,v,y,f,h;return a={reel:null},c=o("reel/"+n+"/"),Promise.resolve(l(c)).then((function(n){try{return(d=null==(s=n)||null==(i=s.entry_data)?void 0:i.PostPage)?(y=r({},null==d||null==(v=d[0])?void 0:v.graphql),f=y.shortcode_media,h=void 0===f?null:f,a.reel=h,e(a)):u(new Error(t))}catch(n){return u(n)}}),u)}))},n.getMediaBySearchQuery=function(n){return new Promise((function(r,e){var u,i,a,c,s,d,v,y,f;return u={media:{users:null,hashtags:null,places:null}},i=o("web/search/topsearch/?context=blended&query="+n+"&include_reel=true"),Promise.resolve(l(i,!1)).then((function(n){try{return(a=n)?(c=a.users,s=void 0===c?null:c,d=a.hashtags,v=void 0===d?null:d,y=a.places,f=void 0===y?null:y,u.media.users=s,u.media.hashtags=v,u.media.places=f,r(u)):e(new Error(t))}catch(n){return e(n)}}),e)}))},n.getMediaByTag=function(n){return new Promise((function(e,u){var i,a,c,s,d,v,y,f,h;return a={tag:null},c=o("explore/tags/"+n+"/"),Promise.resolve(l(c)).then((function(n){try{return(d=null==(s=n)||null==(i=s.entry_data)?void 0:i.TagPage)?(y=r({},null==d||null==(v=d[0])?void 0:v.graphql),f=y.hashtag,h=void 0===f?null:f,a.tag=h,e(a)):u(new Error(t))}catch(n){return u(n)}}),u)}))},n.getMediaByUsername=function(n){return new Promise((function(e,u){var i,a,c,s,d,v,y,f,h;return a={profile:null},c=o(n+"/"),Promise.resolve(l(c)).then((function(n){try{return(d=null==(s=n)||null==(i=s.entry_data)?void 0:i.ProfilePage)?(y=r({},null==d||null==(v=d[0])?void 0:v.graphql),f=y.user,h=void 0===f?null:f,a.profile=h,e(a)):u(new Error(t))}catch(n){return u(n)}}),u)}))},n.getPlacesByCityId=function(n){return new Promise((function(e,u){var i,a,c,s,d,v,y,f,h,p,P,g;return a={place:{city_info:null,country_info:null,location_list:null}},c=o("explore/locations/"+n+"/"),Promise.resolve(l(c)).then((function(n){try{return(d=null==(s=n)||null==(i=s.entry_data)?void 0:i.LocationsDirectoryPage)?(v=r({},null==d?void 0:d[0]),y=v.city_info,f=void 0===y?null:y,h=v.country_info,p=void 0===h?null:h,P=v.location_list,g=void 0===P?null:P,a.place.city_info=f,a.place.country_info=p,a.place.location_list=g,e(a)):u(new Error(t))}catch(n){return u(n)}}),u)}))},Object.defineProperty(n,"__esModule",{value:!0}),n}({});
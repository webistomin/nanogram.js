/**
*
* nanogram.js
*
* @version 3.0.3
* @author Alexey Istomin
* @email: webistomin@gmail.com
* @license: MIT
*
**/

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){return(n=Object.assign||function(n){for(var t,o=1,e=arguments.length;o<e;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}).apply(this,arguments)};function t(n,t,o,e){return new(o||(o=Promise))((function(r,i){function l(n){try{a(e.next(n))}catch(n){i(n)}}function u(n){try{a(e.throw(n))}catch(n){i(n)}}function a(n){var t;n.done?r(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(l,u)}a((e=e.apply(n,t||[])).next())}))}function o(n,t){var o,e,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,e&&(r=2&i[0]?e.return:i[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,i[1])).done)return r;switch(e=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,e=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=l.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(n,l)}catch(n){i=[6,n],e=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var e=/<script type="text\/javascript">window._sharedData = (.*);<\/script>/,r=["[nanogram.js] It looks like your network has been temporary banned because of too many requests."].join("\n"),i=function(n){return"https://www.instagram.com/"+n},l=function(n,t){try{var o=n;return t&&(o=e.exec(n)[1]),JSON.parse(o)}catch(n){throw new Error(n)}},u=function(n,t){return new Promise((function(o,e){var r=new XMLHttpRequest;r.open(n,t),r.onload=function(){return o(r)},r.onerror=e,r.send()}))},a=function(n,e){return void 0===e&&(e=!0),t(void 0,void 0,void 0,(function(){var t,r,i,a;return o(this,(function(o){switch(o.label){case 0:return[4,u("GET",n)];case 1:if(t=o.sent(),r=t.responseText,i=t.status,a=t.responseURL,i>=200&&i<400)return[2,l(r,e)];throw new Error(i+" for "+a)}}))}))};exports.getCitiesByCountryId=function(e){return t(void 0,void 0,void 0,(function(){var t,l,u,c,s,d,v,f,h,p;return o(this,(function(o){switch(o.label){case 0:return t={city_list:null,country_info:null},l=i("explore/locations/"+e+"/"),[4,a(l)];case 1:if(u=o.sent(),!(c=null===(p=null==u?void 0:u.entry_data)||void 0===p?void 0:p.LocationsDirectoryPage))throw new Error(r);return s=n({},null==c?void 0:c[0]),d=s.city_list,v=void 0===d?null:d,f=s.country_info,h=void 0===f?null:f,t.city_list=v,t.country_info=h,[2,t]}}))}))},exports.getCountries=function(){return t(void 0,void 0,void 0,(function(){var t,e,l,u,c,s,d;return o(this,(function(o){switch(o.label){case 0:return t={country_list:null},e=i("explore/locations/"),[4,a(e)];case 1:if(l=o.sent(),!(u=null===(d=null==l?void 0:l.entry_data)||void 0===d?void 0:d.LocationsDirectoryPage))throw new Error(r);return c=n({},null==u?void 0:u[0]).country_list,s=void 0===c?null:c,t.country_list=s,[2,t]}}))}))},exports.getMediaByLocation=function(e,l){return t(void 0,void 0,void 0,(function(){var t,u,c,s,d,v,f,h;return o(this,(function(o){switch(o.label){case 0:return t={location:null},u=i("explore/locations/"+e+"/"+l+"/"),[4,a(u)];case 1:if(c=o.sent(),!(s=null===(f=null==c?void 0:c.entry_data)||void 0===f?void 0:f.LocationsPage))throw new Error(r);return d=n({},null===(h=null==s?void 0:s[0])||void 0===h?void 0:h.graphql).location,v=void 0===d?null:d,t.location=v,[2,t]}}))}))},exports.getMediaByPlaceId=function(e){return t(void 0,void 0,void 0,(function(){var t,l,u,c,s,d,v,f;return o(this,(function(o){switch(o.label){case 0:return t={location:null},l=i("explore/locations/"+e+"/"),[4,a(l)];case 1:if(u=o.sent(),!(c=null===(v=null==u?void 0:u.entry_data)||void 0===v?void 0:v.LocationsPage))throw new Error(r);return s=n({},null===(f=null==c?void 0:c[0])||void 0===f?void 0:f.graphql).location,d=void 0===s?null:s,t.location=d,[2,t]}}))}))},exports.getMediaByPostId=function(e){return t(void 0,void 0,void 0,(function(){var t,l,u,c,s,d,v,f;return o(this,(function(o){switch(o.label){case 0:return t={post:null},l=i("p/"+e+"/"),[4,a(l)];case 1:if(u=o.sent(),!(c=null===(v=null==u?void 0:u.entry_data)||void 0===v?void 0:v.PostPage))throw new Error(r);return s=n({},null===(f=null==c?void 0:c[0])||void 0===f?void 0:f.graphql).shortcode_media,d=void 0===s?null:s,t.post=d,[2,t]}}))}))},exports.getMediaBySearchQuery=function(n){return t(void 0,void 0,void 0,(function(){var t,e,l,u,c,s,d,v,f;return o(this,(function(o){switch(o.label){case 0:return t={media:{users:null,hashtags:null,places:null}},e=i("web/search/topsearch/?context=blended&query="+n+"&include_reel=true"),[4,a(e,!1)];case 1:if(!(l=o.sent()))throw new Error(r);return u=l.users,c=void 0===u?null:u,s=l.hashtags,d=void 0===s?null:s,v=l.places,f=void 0===v?null:v,t.media.users=c,t.media.hashtags=d,t.media.places=f,[2,t]}}))}))},exports.getMediaByTag=function(e){return t(void 0,void 0,void 0,(function(){var t,l,u,c,s,d,v,f;return o(this,(function(o){switch(o.label){case 0:return t={tag:null},l=i("explore/tags/"+e+"/"),[4,a(l)];case 1:if(u=o.sent(),!(c=null===(v=null==u?void 0:u.entry_data)||void 0===v?void 0:v.TagPage))throw new Error(r);return s=n({},null===(f=null==c?void 0:c[0])||void 0===f?void 0:f.graphql).hashtag,d=void 0===s?null:s,t.tag=d,[2,t]}}))}))},exports.getMediaByUsername=function(e){return t(void 0,void 0,void 0,(function(){var t,l,u,c,s,d,v,f;return o(this,(function(o){switch(o.label){case 0:return t={profile:null},l=i(e+"/"),[4,a(l)];case 1:if(u=o.sent(),!(c=null===(v=null==u?void 0:u.entry_data)||void 0===v?void 0:v.ProfilePage))throw new Error(r);return s=n({},null===(f=null==c?void 0:c[0])||void 0===f?void 0:f.graphql).user,d=void 0===s?null:s,t.profile=d,[2,t]}}))}))},exports.getPlacesByCityId=function(e){return t(void 0,void 0,void 0,(function(){var t,l,u,c,s,d,v,f,h,p,y,w;return o(this,(function(o){switch(o.label){case 0:return t={place:{city_info:null,country_info:null,location_list:null}},l=i("explore/locations/"+e+"/"),[4,a(l)];case 1:if(u=o.sent(),!(c=null===(w=null==u?void 0:u.entry_data)||void 0===w?void 0:w.LocationsDirectoryPage))throw new Error(r);return s=n({},null==c?void 0:c[0]),d=s.city_info,v=void 0===d?null:d,f=s.country_info,h=void 0===f?null:f,p=s.location_list,y=void 0===p?null:p,t.place.city_info=v,t.place.country_info=h,t.place.location_list=y,[2,t]}}))}))};